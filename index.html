<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salah Times</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#111827">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Salah Times">
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Home Screen Icons -->
    <link rel="apple-touch-icon" href="icons/icon-72x72.png" sizes="72x72">
    <link rel="apple-touch-icon" href="icons/icon-96x96.png" sizes="96x96">
    <link rel="apple-touch-icon" href="icons/icon-128x128.png" sizes="128x128">
    <link rel="apple-touch-icon" href="icons/icon-144x144.png" sizes="144x144">
    <link rel="apple-touch-icon" href="icons/icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="icons/icon-384x384.png" sizes="384x384">
    <link rel="apple-touch-icon" href="icons/icon-512x512.png" sizes="512x512">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="icons/icon-192x192.png">
    
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900 text-white min-h-screen p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Sticky Header with right-aligned controls -->
        <div class="sticky top-0 z-40 bg-gray-800 backdrop-blur-md rounded-xl border border-gold-600/20 mb-4 shadow-lg">
            <div class="p-4 flex justify-between items-center">
                <!-- Left side: Title and description -->
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold text-gold">Salah Times</h1>
                    <p class="text-gray-400 text-xs md:text-sm">Track your daily prayers with precision</p>
                </div>
                
                <!-- Right side: Controls -->
                <div class="flex items-center space-x-2">
                    <!-- Theme toggle without outer container -->
                    <div class="theme-toggle-container">
                        <input type="checkbox" id="themeToggle" class="sr-only" />
                        <label for="themeToggle" class="theme-toggle">
                            <!-- Sun Icon (Light Mode) -->
                            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 3a1 1 0 0 1 1 1v1a1 1 0 0 1-2 0V4a1 1 0 0 1 1-1zm7 6a1 1 0 0 1 0 2h-1a1 1 0 0 1 0-2h1zM6 9a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2h1zm8 8a1 1 0 0 1-2 0v-1a1 1 0 0 1 2 0v1zm-9-7a1 1 0 0 1 1-1 1 1 0 0 1 0 2 1 1 0 0 1-1-1zm1.7 6.3a1 1 0 0 1 0-1.4 1 1 0 0 1 1.4 0 1 1 0 0 1 0 1.4 1 1 0 0 1-1.4 0zM16 17a1 1 0 0 1 1-1 1 1 0 0 1 0 2 1 1 0 0 1-1-1zm1.3-10.7a1 1 0 0 1 0 1.4 1 1 0 0 1-1.4 0 1 1 0 0 1 0-1.4 1 1 0 0 1 1.4 0zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10z"/>
                            </svg>
                            
                            <span class="theme-toggle-thumb"></span>
                            
                            <!-- Moon Icon (Dark Mode) -->
                            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/>
                            </svg>
                        </label>
                    </div>
                    
                    <!-- Settings button (not in the container) -->
                    <button id="openSettings" class="settings-btn text-gold hover:text-gold-400 transition-all focus:outline-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Bento Grid Layout -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- Current Time Display -->
            <div class="bg-gray-800 rounded-xl p-4 shadow-lg border border-gold-600/20 hover:border-gold-400/40 transition-all">
                <h2 class="text-xl font-semibold text-gold mb-2">Current Time</h2>
                <div id="current-time" class="text-3xl font-bold">--:--:--</div>
                <div id="current-date" class="text-gray-400">Loading...</div>
                <div id="current-location" class="mt-2 text-sm text-gray-400">Location: Loading...</div>
            </div>

            <!-- Prayer Window Display (formerly Prayer Times Overview) -->
            <div class="bg-gray-800 rounded-xl p-4 md:col-span-2 shadow-lg border border-gold-600/20 hover:border-gold-400/40 transition-all h-auto min-h-[300px] flex flex-col">
                <h2 class="text-xl font-semibold text-gold mb-2">Salah Window</h2>
                <div id="prayer-times-grid" class="flex-1">
                    <!-- Prayer window will be inserted here dynamically -->
                    <div class="h-full flex items-center justify-center">
                        <div class="animate-pulse flex flex-col items-center">
                            <div class="h-5 w-40 bg-gray-600 rounded mb-4"></div>
                            <div class="h-8 w-28 bg-gray-600 rounded mb-2"></div>
                            <div class="h-4 w-48 bg-gray-600 rounded mb-8"></div>
                            <div class="h-3 w-full bg-gray-600 rounded mb-2"></div>
                            <div class="flex justify-between w-full">
                                <div class="h-3 w-20 bg-gray-600 rounded"></div>
                                <div class="h-3 w-20 bg-gray-600 rounded"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional Times -->
            <div class="bg-gray-800 rounded-xl p-4 shadow-lg border border-gold-600/20 hover:border-gold-400/40 transition-all">
                <h2 class="text-xl font-semibold text-gold mb-2">Additional Times</h2>
                <ul class="space-y-2" id="additional-times">
                    <li class="flex justify-between items-center p-2 bg-gray-700/50 rounded animate-pulse">
                        <span class="h-4 w-16 bg-gray-600 rounded"></span>
                        <span class="h-4 w-16 bg-gray-600 rounded"></span>
                    </li>
                    <li class="flex justify-between items-center p-2 bg-gray-700/50 rounded animate-pulse">
                        <span class="h-4 w-16 bg-gray-600 rounded"></span>
                        <span class="h-4 w-16 bg-gray-600 rounded"></span>
                    </li>
                    <li class="flex justify-between items-center p-2 bg-gray-700/50 rounded animate-pulse">
                        <span class="h-4 w-16 bg-gray-600 rounded"></span>
                        <span class="h-4 w-16 bg-gray-600 rounded"></span>
                    </li>
                </ul>
            </div>

            <!-- Prayer Details -->
            <div class="bg-gray-800 rounded-xl p-4 md:col-span-2 shadow-lg border border-gold-600/20 hover:border-gold-400/40 transition-all">
                <h2 class="text-xl font-semibold text-gold mb-2">Salah Details</h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="text-left border-b border-gray-700">
                                <th class="py-2 pr-4 text-gold">Prayer</th>
                                <th class="py-2 pr-4 text-gold">Time</th>
                                <th class="py-2 pr-4 text-gold">Sunnah</th>
                                <th class="py-2 pr-4 text-gold">Fard</th>
                            </tr>
                        </thead>
                        <tbody id="prayer-details">
                            <!-- Table rows will be added dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings Slide Panel (outside the main container) -->
    <div id="settingsBackdrop" class="fixed inset-0 bg-gray-900/70 z-40 hidden" style="backdrop-filter: blur(2px);"></div>
    <div id="settingsPanel" class="fixed top-0 right-0 bottom-0 w-full md:w-96 bg-gray-800 shadow-xl z-50 transform translate-x-full transition-transform duration-300 ease-in-out overflow-y-auto">
        <div class="p-4 h-full flex flex-col">
            <div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-2">
                <h2 class="text-xl font-semibold text-gold">Settings</h2>
                <button id="closeSettings" class="text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto space-y-6 pr-2">
                <!-- Location Settings -->
                <div class="space-y-4">
                    <h3 class="font-medium text-gold">Location</h3>
                    <div class="relative">
                        <label for="locationSearch" class="block text-sm text-gray-400 mb-1">Search for a location:</label>
                        <input type="text" id="locationSearch" placeholder="Enter city or address" 
                            class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent">
                        <div id="locationSuggestions" class="absolute z-10 w-full mt-1 bg-gray-700 border border-gray-600 rounded-md shadow-lg hidden">
                            <!-- Suggestions will be added here -->
                        </div>
                    </div>
                    <button id="getCurrentLocation" class="w-full flex items-center justify-center px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gold" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                        </svg>
                        Use My Location
                    </button>
                </div>

                <!-- Prayer Settings -->
                <div class="space-y-4">
                    <h3 class="font-medium text-gold">Prayer Settings</h3>
                    <div>
                        <label for="calculationMethod" class="block text-sm text-gray-400 mb-1">Calculation Method</label>
                        <select id="calculationMethod" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent">
                            <option value="2">Islamic Society of North America</option>
                            <option value="3" selected>Muslim World League</option>
                            <option value="4">Umm Al-Qura University, Makkah</option>
                            <option value="5">Egyptian General Authority of Survey</option>
                            <option value="1">University of Islamic Sciences, Karachi</option>
                            <option value="7">Institute of Geophysics, University of Tehran</option>
                            <option value="12">Jafari</option>
                        </select>
                    </div>
                    <div>
                        <label for="juristicSchool" class="block text-sm text-gray-400 mb-1">Juristic School (Asr)</label>
                        <select id="juristicSchool" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent">
                            <option value="0">Standard (Shafi, Maliki, Hanbali)</option>
                            <option value="1">Hanafi</option>
                        </select>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="latitudeMethod" class="block text-sm text-gray-400 mb-1">Higher Latitude</label>
                            <select id="latitudeMethod" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent">
                                <option value="0">Middle of Night</option>
                                <option value="1">One-Seventh</option>
                                <option value="2" selected>Angle-Based</option>
                            </select>
                        </div>
                        <div>
                            <label for="midnightMode" class="block text-sm text-gray-400 mb-1">Midnight Mode</label>
                            <select id="midnightMode" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent">
                                <option value="0">Standard (Mid Sunset to Sunrise)</option>
                                <option value="1">Jafari (Mid Sunset to Fajr)</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Tune Prayer Times -->
                <div class="space-y-4">
                    <h3 class="font-medium text-gold">Tune Prayer Times (in minutes)</h3>
                    <p class="text-xs text-gray-400">Adjust prayer times forward or backward by specifying minutes</p>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="tuneImsak" class="block text-sm text-gray-400 mb-1">Imsak</label>
                            <input type="number" id="tuneImsak" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                        <div>
                            <label for="tuneFajr" class="block text-sm text-gray-400 mb-1">Fajr</label>
                            <input type="number" id="tuneFajr" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                        <div>
                            <label for="tuneSunrise" class="block text-sm text-gray-400 mb-1">Sunrise</label>
                            <input type="number" id="tuneSunrise" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                        <div>
                            <label for="tuneDhuhr" class="block text-sm text-gray-400 mb-1">Dhuhr</label>
                            <input type="number" id="tuneDhuhr" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                        <div>
                            <label for="tuneAsr" class="block text-sm text-gray-400 mb-1">Asr</label>
                            <input type="number" id="tuneAsr" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                        <div>
                            <label for="tuneSunset" class="block text-sm text-gray-400 mb-1">Sunset</label>
                            <input type="number" id="tuneSunset" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                        <div>
                            <label for="tuneMaghrib" class="block text-sm text-gray-400 mb-1">Maghrib</label>
                            <input type="number" id="tuneMaghrib" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                        <div>
                            <label for="tuneIsha" class="block text-sm text-gray-400 mb-1">Isha</label>
                            <input type="number" id="tuneIsha" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                        <div>
                            <label for="tuneMidnight" class="block text-sm text-gray-400 mb-1">Midnight</label>
                            <input type="number" id="tuneMidnight" class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent" value="0">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 pt-4 border-t border-gray-700">
                <button id="applySettings" class="w-full px-4 py-3 bg-gold text-gray-900 rounded hover:bg-gold-600 transition-colors font-medium">
                    Apply Settings
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
